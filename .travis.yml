  os:
    - osx
    - linux

compiler:
    - gcc
    - clang
sudo: required
before_install:
 - if [ $TRAVIS_OS_NAME == osx ]; then brew update && brew outdated gcc-arm-none-eabi || brew upgrade gcc-arm-none-eabi;fi
 - if [ $TRAVIS_OS_NAME == linux ]; then sudo add-apt-repository -y ppa:terry.guo/gcc-arm-embedded && sudo apt-get update -qq -y && sudo apt-get install -qq -y doxygen graphviz gcc-arm-none-eabi libssl-dev ;fi
- git clone https://github.com/psxdev/psp2sdk_travisosx.git src/html -qb gh-pages --single-branch
 - git -C src/html rm -qrf .

script:
 - export REV=dirty-$(git describe --always)

 - cd src
 - ./autogen.sh $FLAGS
 - doxygen
 - make install
 - cd ..

 - cd tools
 - ./autogen.sh $FLAGS
 - make install
 - make clean
 - cd ../out
 - ls -l

env:
 global:
  - FLAGS="-q --prefix=$PWD/out"




